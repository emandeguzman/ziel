<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.68.3" />
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Solar System</title>

    <style>body,html{min-width:100vw;min-height:100vh;margin:0;border:0;padding:0}body{position:relative}img{position:absolute;height:0;opacity:0}canvas{position:absolute;top:0;left:0;width:100%;height:100%}body{border:2px solid #f60;box-sizing:border-box}canvas{border:2px solid red;box-sizing:border-box}</style>

    <script>/*!
* domready (c) Dustin Diaz 2014 - License MIT
*/!function(name,definition){if(typeof module!='undefined')module.exports=definition()
else if(typeof define=='function'&&typeof define.amd=='object')define(definition)
else this[name]=definition()}('domready',function(){var fns=[],listener,doc=typeof document==='object'&&document,hack=doc&&doc.documentElement.doScroll,domContentLoaded='DOMContentLoaded',loaded=doc&&(hack?/^loaded|^c/:/^loaded|^i|^c/).test(doc.readyState)
if(!loaded&&doc)
doc.addEventListener(domContentLoaded,listener=function(){doc.removeEventListener(domContentLoaded,listener)
loaded=1
while(listener=fns.shift())listener()})
return function(fn){loaded?setTimeout(fn,0):fns.push(fn)}});</script>
</head>
<body>
	
	
<canvas id="bg"></canvas>
<canvas id="mid"></canvas>
<canvas id="mid1"></canvas>
<canvas id="mid2"></canvas>
<canvas id="fg"></canvas>












<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/test.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/canvas.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/canvasItem.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/canvasShape.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/canvasImage.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/celestialBody.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/intro.js'></script>
<script src='http://wa.lan/.eman/ziel/solarsystem2/public/js/journey.js'></script>


<script>
    function tracking(msg) {console.debug(msg)}

    

    function loadImg(imgurl){
        return new Promise(resolve => {
            document.querySelectorAll("img").forEach(img=>{
                if (img.src == imgurl) {
                    tracking(`img already loaded ${imgurl}`);
                    resolve(img);
                    return;
                }
            });

            const img = document.createElement("IMG");
            document.body.appendChild(img);
            img.style.display = "none";
            img.src = imgurl;
            img.addEventListener("load", ()=>{
                tracking(`img loaded ${imgurl}`);
                resolve(img);
            })

        })
    }

    function getX(x) { return x;}
    function getY(y) { return y;}
    function getWidth(w) { return w;}
    function getHeight(h) { return h;}
    function getRadius(r) { return r;}
    
    (async ()=>{
        await new Promise((resolve, reject)=>{
            domready(()=>{resolve()});
        })

        tracking("start");
        const bg = new Canvas("#bg");
        const mid = new Canvas("#mid");
        const mid1 = new Canvas("#mid1");
        const mid2 = new Canvas("#mid2");
        const fg = new Canvas("#fg");

        let step = "intro";
        step = "journey";
        loop: {
            for(;;) {
                switch(step) {
                    case "intro":
                        if (await intro(bg, mid, fg) == "next") {
                            step = "journey";
                        }
                        break;
                    case "journey":
                    if (await journey(bg, mid, mid1, mid2, fg) == "next") {
                            step = "end";
                        }
                        break;
                    case "end":
                        tracking("end");
                        break loop;
                }
            }
        }
    })();
</script>

	
</body>
</html>
